{% extends "base.html" %}
{% block content %}
<h2>Editar post</h2>
<form method="post" class="form">
  <label>Título
    <input type="text" name="titulo" value="{{ post.titulo }}" required>
  </label>
  <label>Contenido
    <textarea name="contenido" rows="6" required>{{ post.contenido }}</textarea>
  </label>
  <label>Autor
    <select name="autor_id" required>
      {% for u in usuarios %}
        <option value="{{ u.id }}" {{ 'selected' if u.id == post.autor_id else '' }}>{{ u.nombre_usuario }}</option>
      {% endfor %}
    </select>
  </label>
  <fieldset>
    <legend>Categorías</legend>
    {% set seleccionadas = post.categorias | map(attribute='id') | list %}
    {% for c in categorias %}
      <label class="check">
        <input type="checkbox" name="categorias" value="{{ c.id }}" {{ 'checked' if c.id in seleccionadas else '' }}>
        {{ c.nombre }}
      </label>
    {% endfor %}
  </fieldset>
  <button class="btn" type="submit">Guardar cambios</button>
</form>
{% endblock %}
